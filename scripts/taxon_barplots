#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
Created on Fri Jul  2 15:03:24 2021

@author: jharrison
"""
#Goal is to have two barplots, one for EN and one for EP, with bars for each host taxon
#To do this I need something like this: 
## Values of each group
#bars1 = [12, 28, 1, 8, 22]
#bars2 = [28, 7, 16, 4, 10]
#bars3 = [25, 3, 23, 25, 17]
# where the integers correspond to different taxa (e.g., family, phyla)
#and there are different bars for each taxon/compartment combo

import numpy as np
import pandas as pd

#Bring in taxon proportions, these were wrangled in R after being generated by CNVRG
props = pd.read_csv("./processedData/ITSp_estimates_wrangled_for_post_modeling_analysis.csv")
#to handle ragged input not the specification of columns used here
taxa = pd.read_table("./processedData/smallmem97_ITS.sintax", names=range(4), sep='\t')
taxa.shape
meta = pd.read_csv("./processedData/ITSmetadat_wrangled_for_post_modeling_analysis.csv")

props_meta = pd.merge(props, meta, on="sample")
#QC, all is well
# props_meta.shape
# props.shape
# meta.shape

#Extract just those taxa that are hypothesized to be fungi
boolarray = pd.Series(df_taxa.loc[:,0] == "d:Fungi").values
taxa = taxa.loc[boolarray,:]
df_taxa = taxa[3].str.split(",", expand = True)


# function to get unique values. snagged from geeksforgeeks
def unique(list1):
 
    # intilize a null list
    unique_list = []
     
    # traverse for all elements
    for x in list1:
        # check if exists in unique_list or not
        if x not in unique_list:
            unique_list.append(x)
    # print list
    for x in unique_list:
        print(x)


orders = unique(df_taxa[3])

#Find all the taxa within an order
for i in orders:
    taxa.iloc[:,0][df_taxa.iloc[:,3] == i]

#Then do row sums for those taxa and add
#those new sums to a new dataframe that has samples as the first field
#then each summed taxon in subsequent fields. Once this df
#is made then we can plot it. Also turn all this code
#into a function so I can do it for orders, family, phyla





https://www.python-graph-gallery.com/12-stacked-barplot-with-matplotlib